<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hoja de vida Equipo Hospitalario</title>
        <link rel="stylesheet" href="hoja_vida_equipo.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>     
    </head>

    <body>

        
         <!-- Bot√≥n para volver a mantenimiento-->
    <div class="contenedor-boton-mantenimiento">
        <a href="cambios_mantenimiento.html" class="boton-volver"><i class="fas fa-arrow-left"></i></a>
    </div>
        
    <header>
            <h1>Gesti√≥n Hoja de vida Equipos M√©dicos</h1>
        </header>
   
            <!--hoja de vida-->
            <!-- Contenedor Principal -->
<section class="hoja-vida-container">
    <table class="hoja-vida">
        <!-- üìå Encabezado de la Hoja de Vida -->
        <thead>
            <tr>
                <th colspan="6" class="titulo-seccion">HOJA DE VIDA EQUIPO HOSPITALARIO</th>
            </tr>
        </thead>

        <!-- üìå Secci√≥n 1: Identificaci√≥n -->
        <tbody id="identificacion">
            <tr>
                <th colspan="6" class="titulo-seccion">1. IDENTIFICACI√ìN</th>
            </tr>
            <tr>
                <td rowspan="4" class="imagen-columna">
                    <label for="imagenEquipo" id="labelImagenEquipo">
                        <i class="fas fa-camera"></i>
                        <p>Subir foto</p>
                        <input type="file" id="imagenEquipo" accept="image/*" style="display: none;" onchange="previewImage(event)">
                    </label>
                    <img id="preview" src="" alt="Imagen del Equipo" style="display: none;">
                </td>
                <td>Nombre del Equipo:</td>
                <td><input type="text" id="nombreEquipo"></td>
                <td>Marca:</td>
                <td><input type="text" id="hojaVidaMarca"></td>
            </tr>
            <tr>
                <td>Modelo:</td>
                <td><input type="text" id="hojaVidaModelo"></td>
                <td>N√∫mero de Serie:</td>
                <td><input type="text" id="hojaVidaNumeroSerie"></td>
            </tr>
            <tr>
                <td>Servicio:</td>
                <td><input type="text" id="hojaVidaServicio"></td>
                <td>Ubicaci√≥n:</td>
                <td><input type="text" id="ubicacion"></td>
            </tr>
            <tr>
                <td>Equipo:</td>
                <td>
                    <select id="tipoHojaVida">
                        <option value="Fijo">Fijo</option>
                        <option value="M√≥vil">M√≥vil</option>
                    </select>
                </td>
                <td>Registro Sanitario:</td>
                <td><input type="text" id="invima"></td>
            </tr>
        </tbody>

        <!-- üìå Secci√≥n 2: Registro Hist√≥rico -->
        <tbody id="registroHistorico">
            <tr>
                <th colspan="6" class="titulo-seccion">2. REGISTRO HIST√ìRICO</th>
            </tr>
            <tr>
                <td>Forma de adquisici√≥n:</td>
                <td colspan="4">
                    <select id="formaAdquisicion" onchange="actualizarCamposAdquisicion()">
                        <option value="" disabled selected>Seleccione una opci√≥n</option>
                        <option value="Compra">Compra</option>
                        <option value="Donaci√≥n">Donaci√≥n</option>
                        <option value="Arrendamiento">Arrendamiento</option>
                        <option value="Comodato">Comodato</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td colspan="6">
                    <div id="camposDinamicos"></div>
                </td>
            </tr>
        </tbody>

        <!-- üìå Secci√≥n 3: Registro de Apoyo T√©cnico -->
        <table class="tabla-registro">
            <thead>
                <tr>
                    <th colspan="7" class="titulo-seccion">3. REGISTRO</th>
                </tr>
                
                <tr>
                    <th colspan="3" class="titulo-sub">3.1 Manuales</th>
                    <th colspan="2" class="titulo-sub">3.2 Clasificaci√≥n</th>
                    <th colspan="3" class="titulo-sub">3.3 Tecnolog√≠a</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td rowspan="3" class="categoria">Manual Usuario</td>
                    <td>F√≠sico:</td> <td><input type="checkbox"></td>
                    <td>Diagn√≥stico:</td> <td><input type="checkbox"></td>
                    <td>Neum√°tica:</td> <td><input type="checkbox"></td>
                </tr>
                <tr>
                    <td>Digital:</td> <td><input type="checkbox"></td>
                    <td>Tratamiento:</td> <td><input type="checkbox"></td>
                    <td>Mec√°nica:</td> <td><input type="checkbox"></td>
                </tr>
                <tr>
                    <td>No Disp.:</td> <td><input type="checkbox"></td>
                    <td>Prevenci√≥n:</td> <td><input type="checkbox"></td>
                    <td>El√©ctrica:</td> <td><input type="checkbox"></td>
                </tr>
        
                <tr>
                    <td rowspan="3" class="categoria">Manual T√©cnico</td>
                    <td>F√≠sico:</td> <td><input type="checkbox"></td>
                    <td>Rehabilitaci√≥n:</td> <td><input type="checkbox"></td>
                    <td>Electr√≥nica:</td> <td><input type="checkbox"></td>
                </tr>
                <tr>
                    <td>Digital:</td> <td><input type="checkbox"></td>
                    <td>An√°lisis:</td> <td><input type="checkbox"></td>
                    <td>Hidr√°ulica:</td> <td><input type="checkbox"></td>
                </tr>
                <tr>
                    <td>No Disp.:</td> <td><input type="checkbox"></td>
                    <td>Info. Hospitalaria:</td> <td><input type="checkbox"></td>
                    <td>Electromagn√©tica:</td> <td><input type="checkbox"></td>
                </tr>
            </tbody>
        </table>

        <!-- üìå Secci√≥n 4: Caracter√≠sticas T√©cnicas -->
        <table class="tabla-caracteristicas">
            <thead>
                <tr> 
                    <th colspan="6" class="titulo-seccion">4. CARACTER√çSTICAS T√âCNICAS</th>
                </tr>
            </thead>
            <tbody id="caracteristicasTecnicas">
                <tr>
                    <td class="col-1">Tipo de Corriente:</td>
                    <td><input type="text" id="alimentacion"></td>
                    <td class="col-1">Tec. predominante:</td>
                    <td><input type="text" id="predominante"></td>
                </tr>
        
                <tr>
                    <td class="col-1">Di√°metro Distal:</td>
                    <td><input type="text" id="diametro"></td>
                    <td class="col-1">Di√°metro del canal:</td>
                    <td><input type="text" id="canalTrabajo"></td>
                </tr>
        
                <tr>
                    <td class="col-1">Temperatura:</td>
                    <td><input type="text" id="temperatura"></td>
                    <td class="col-1">Frecuencia:</td>
                    <td><input type="text" id="frecuencia"></td>
                </tr>
                
                <tr>
                    <td class="col-1">Profundidad sistema √≥ptico:</td>
                    <td><input type="text" id="profundidad"></td>
                    <td class="col-1">Longitud total:</td>
                    <td><input type="text" id="longitud"></td>
                </tr>
        
                <tr>
                    <td class="col-1">Tubo de inserci√≥n:</td>
                    <td><input type="text" id="tuboInsercion"></td>
                    <td class="col-1">Otros:</td>
                    <td><input type="text" id="otros"></td>
                </tr>
            </tbody>
        </table>


<!-- üìå Secci√≥n 5: Registro Hist√≥rico de Instalaci√≥n -->
<table class="tabla-instalacion">
    <thead>
        <tr>
            <th colspan="6" class="titulo-seccion">5. REGISTRO HIST√ìRICO DE INSTALACI√ìN</th>
        </tr>
    </thead>
    <tbody id="registroHistoricoInstalacion">
        <tr>
            <td class="col-1">Fuente de alimentaci√≥n:</td>
            <td><input type="text" id="alimentacion"></td>
            <td class="col-1">Tec. predominante:</td>
            <td><input type="text" id="predominante"></td>        
        </tr>

        <tr>
            <td class="col-1">Voltaje M√°ximo:</td>
            <td><input type="text" id="voltajeMax"></td>
            <td class="col-1">Voltaje M√≠nimo:</td>
            <td><input type="text" id="voltajeMin"></td>
        </tr> 
        
        <tr>   
            <td class="col-1">Corriente M√°xima:</td>
            <td><input type="text" id="corrienteMax"></td>
            <td class="col-1">Corriente M√≠nima:</td>
            <td><input type="text" id="corrienteMin"></td>
        </tr>

        <tr>
            <td class="col-1">Potencia:</td>
            <td><input type="text" id="potencia"></td>
            <td class="col-1">Presi√≥n:</td>
            <td><input type="text" id="presion"></td>
        </tr>

        <tr>
            <td class="col-1">Velocidad:</td>
            <td><input type="text" id="velocidad"></td>
            <td class="col-1">Peso:</td>
            <td><input type="text" id="peso"></td>
        </tr>

        <tr>
            <td class="col-1">Temperatura:</td>
            <td><input type="text" id="temperatura"></td>
            <td class="col-1">Frecuencia:</td>
            <td><input type="text" id="frecuencia"></td>
        </tr>

        <tr>
            <td class="col-1">Otros:</td>
            <td colspan="3"><input type="text" id="otros"></td>
        </tr>
    </tbody>
</table>


    <!--****************************************************************************-->
<!-- üìå Secci√≥n 6: Registro T√©cnico de Funcionamiento -->
<table class="tabla-funcionamiento">
    <thead>
        <tr>
            <th colspan="8" class="titulo-seccion">6. REGISTRO T√âCNICO DE FUNCIONAMIENTO</th>
        </tr>
    </thead>
    <tbody id="registroTecnicoFuncionamiento">
        <tr>
            <td class="col-1">Rango de voltaje:</td>
            <td><input type="text" id="voltaje"></td>
            <td class="col-1">Rango de corriente:</td>
            <td><input type="text" id="corriente"></td>
            <td class="col-1">Rango de potencia:</td>
            <td><input type="text" id="potencia"></td>
        </tr>

        <tr>
            <td class="col-1">Frecuencia:</td>
            <td><input type="text" id="frecuencia"></td>
            <td class="col-1">Rango de presi√≥n:</td>
            <td><input type="text" id="presion"></td>
            <td class="col-1">Rango de velocidad:</td>
            <td><input type="text" id="rangoVelocidad"></td>
        </tr>

        <tr>
            <td class="col-1">Rango de temperatura:</td>
            <td><input type="text" id="rangoTemperatura"></td>
            <td class="col-1">Peso:</td>
            <td><input type="text" id="peso1"></td>
            <td class="col-1">Rango de humedad:</td>
            <td><input type="text" id="rangoHumedad"></td>
        </tr>

        <tr>
            <td class="col-1">Otras recomendaciones del fabricante:</td>
            <td colspan="5"><input type="text" id="otrasRecomendaciones"></td>
        </tr>
    </tbody>
</table>

    <!--*************************************************************************-->
    
    <!-- üìå Secci√≥n 6: Registro de Apoyo T√©cnico -->
<table class="tabla-registro">
    <thead>
        <tr>
            <th colspan="6" class="titulo-seccion">6. REGISTRO DE APOYO T√âCNICO</th>
        </tr>
    </thead>
    <tbody id="registroApoyoTecnico">
        <tr>
            <td class="titulo-campo">Clasificaci√≥n Biom√©dica:</td>
            <td colspan="2"><input type="text" id="clasificacionBiomedica"></td>

            <td class="titulo-campo">Clasificaci√≥n por Riesgo:</td>
            <td colspan="2"><input type="text" id="clasificacionPorRiesgo"></td>
        </tr>
    </tbody>
</table>


    <!--***********************************************************************-->
    <!-- üìå Secci√≥n 7: Mantenimiento -->
<table class="tabla-registro">
    <thead>
        <tr>
            <th colspan="7" class="titulo-seccion">7. MANTENIMIENTO</th>
        </tr>
    </thead>
    <tbody id="mantenimiento">
        <tr>
            <td class="titulo-campo">Periodicidad del Mantenimiento:</td>
            <td colspan="2"><input type="text" name="periocidadMantenimiento"></td>

            <td class="titulo-campo">Requiere Calibraci√≥n:</td>
            <td><input type="text" name="Requiere"></td>

            <td class="titulo-campo">Periodicidad de Calibraci√≥n:</td>
            <td><input type="text" name="periocidadCalibracion"></td>
        </tr>
    </tbody>
</table>


    <!--****************************************************************-->
    <!-- üìå Secci√≥n 8: Componentes -->
    <table class="tabla-componentes">
        <thead>
            <tr>
                <th colspan="7" class="titulo-seccion">8. COMPONENTES</th>
            </tr>
            <tr>
                <th colspan="3" class="titulo-sub-componentes">Nombre del Componente</th>
                <th class="titulo-sub-componentes">Marca</th>
                <th class="titulo-sub-componentes">Modelo</th>
                <th class="titulo-sub-componentes">N√∫mero de Serie</th>
            </tr>
        </thead>
        <tbody id="listaComponentes">
            <tr>
                <td colspan="3"><input type="text" class="input-componente"></td>
                <td><input type="text" class="input-fabricante"></td>
                <td><input type="text" class="input-referencia"></td>
                <td><input type="text" class="input-numero-serie"></td>     
            </tr>
            <tr>
                <td colspan="3"><input type="text" class="input-componente"></td>
                <td><input type="text" class="input-fabricante"></td>
                <td><input type="text" class="input-referencia"></td>
                <td><input type="text" class="input-numero-serie"></td>     
            </tr>
            <tr>
                <td colspan="3"><input type="text" class="input-componente"></td>
                <td><input type="text" class="input-fabricante"></td>
                <td><input type="text" class="input-referencia"></td>
                <td><input type="text" class="input-numero-serie"></td>     
            </tr>
            <tr>
                <td colspan="3"><input type="text" class="input-componente"></td>
                <td><input type="text" class="input-fabricante"></td>
                <td><input type="text" class="input-referencia"></td>
                <td><input type="text" class="input-numero-serie"></td>     
            </tr>
            <tr>
                <td colspan="3"><input type="text" class="input-componente"></td>
                <td><input type="text" class="input-fabricante"></td>
                <td><input type="text" class="input-referencia"></td>
                <td><input type="text" class="input-numero-serie"></td>     
            </tr>
        </tbody>
    </table>
    


    <table class="tabla-chequeo">
        <thead>
            <tr>
                <th colspan="7" class="titulo-seccion">9. LISTA DE CHEQUEO DE DOCUMENTOS SOPORTES ANEXOS A LA HOJA DE VIDA</th>
            </tr>
            <tr>
                <th class="titulo-sub-chequeo">No.</th>
                <th class="titulo-sub-chequeo">Documento</th>
                <th class="titulo-sub-chequeo">Anexo</th>
                <th class="titulo-sub-chequeo">No Anexo</th>
                <th class="titulo-sub-chequeo">No Aplica</th>
                <th class="titulo-sub-chequeo">Observaciones</th>
            </tr>
        </thead>
        <tbody class="listaChequeo">
            <tr>
                <td>1</td>
                <td>Copia de Registro Sanitario</td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td>2</td>
                <td>Copia de Registro de Importaci√≥n</td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td>3</td>
                <td>Copia de Factura</td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td>4</td>
                <td>Copia de Acta de Recibo a Satisfacci√≥n por el Cliente</td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td>5</td>
                <td>Protocolo de Mantenimiento Preventivo del Fabricante</td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td>6</td>
                <td>Gu√≠a R√°pida de Operaci√≥n</td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td>7</td>
                <td>Recomendaciones del Fabricante para la Calibraci√≥n (si requiere)</td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="text"></td>
            </tr>
            <tr>
                <td>8</td>
                <td>Hoja de Vida del Personal Biom√©dico</td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="checkbox" class="input-check"></td>
                <td><input type="text"></td>
            </tr>
        </tbody>
    </table>
    
 </table>           
</section>

                <!--******************************************************************************************-->
                
                <div class="botonera">
                    <button id="downloadBtn"><i class="fas fa-download"></i> Descargar</button>
                    <button id="printBtn"><i class="fas fa-print"></i> Imprimir</button>
                    <button id="guardarHojaVida"><i class="fas fa-save"></i> Guardar Hoja de Vida</button>
                </div>
                
 
       <script>

        //******************************************************
        //CARGA DE LA IMAGEN EN LA HOJA DE VIDA
            function previewImage(event) {
                const reader = new FileReader();
                reader.onload = function () {
                    const output = document.getElementById('preview');
                    const label = document.getElementById('labelImagenEquipo');

                    // Mostrar la imagen cargada
                    output.src = reader.result;
                    output.style.display = 'block';
        
                    // Ocultar el √≠cono y texto de subir foto
                    label.style.display = 'none';
                };
                reader.readAsDataURL(event.target.files[0]);
            }


        //************************************************************
        //SINCRONIZACION DE LOS DATOS DESDE EL LOCALSTORAGE

        document.addEventListener("DOMContentLoaded", () => {
    const params = new URLSearchParams(window.location.search);
    const equipoEncoded = params.get('equipo');

    if (!equipoEncoded) {
        // Si no hay datos en la URL, no mostrar alerta
        console.warn("No se encontraron datos del equipo en la URL.");
        return;
    }

    try {
        // Intentar decodificar y parsear los datos del equipo
        const equipo = JSON.parse(decodeURIComponent(equipoEncoded));

        console.log("Datos del equipo recibidos:", equipo);

        // Llenar los campos de identificaci√≥n
        document.getElementById('nombreEquipo').value = equipo.nombre || '';
        document.getElementById('hojaVidaModelo').value = equipo.modelo || '';
        document.getElementById('hojaVidaNumeroSerie').value = equipo.numeroSerie || '';
        document.getElementById('hojaVidaMarca').value = equipo.marca || '';
        document.getElementById('hojaVidaServicio').value = equipo.servicio || '';
        document.getElementById('ubicacion').value = equipo.ubicacion || '';
    } catch (error) {
        // Si ocurre un error al procesar los datos, mostrar advertencia en consola
        console.error("Error al procesar los datos del equipo:", error);
        console.warn("Los datos del equipo no son v√°lidos.");
    }
});


        //******************************************************************
        //ESTABLECE CLASE DE EQUIPO FIJO/MOVIL

            document.addEventListener("DOMContentLoaded", () => {
    
                // Configura un valor predeterminado (opcional)
                const tipoEquipo = document.getElementById("tipoHojaVida");
                tipoEquipo.value = "Fijo"; // Establece "Fijo" como predeterminado, si es necesario.

                // Escucha cambios en la selecci√≥n
                tipoEquipo.addEventListener("change", () => {
                    console.log("Tipo de equipo seleccionado:", tipoEquipo.value); 
                });
            });

        //*************************************************************************
        //FORMA DE ADQUISICION

            function actualizarCamposAdquisicion() {
                const formaAdquisicion = document.getElementById("formaAdquisicion").value;
                const camposDinamicos = document.getElementById("camposDinamicos");
                let contenido = "";

                // Limpiar campos previos
                camposDinamicos.innerHTML = "";
    
                if (formaAdquisicion === "Compra") {
        contenido = `   
        <div class="fila">
            <div class="campo">
                <label for="fechaAdquisicion">Fecha de Adquisici√≥n:</label>
                <input type="date" id="fechaAdquisicion">
            </div>
            <div class="campo">
                <label for="numeroFactura">N√∫mero de Factura:</label>
                <input type="text" id="numeroFactura">
            </div>
        </div>

        <div class="fila">
            <div class="campo">
                <label for="garantia">Garant√≠a:</label>
                <input type="text" id="garantia">
            </div>
            <div class="campo">
                <label for="costoCompra">Costo:</label>
                <select id="monedaCompra">
                    <option value="USD">$ USD</option>
                    <option value="COP">$ COP</option>
                    <option value="EUR">‚Ç¨ EUR</option>
                </select>
                <input type="number" id="costoCompra" placeholder="Ingrese el monto">
            </div>
        </div>

        <div class="fila">
            <div class="campo">
                <label for="proveedor">Proveedor:</label>
                <input type="text" id="proveedor">
            </div>
            <div class="campo">
                <label for="telefonoCompra">N√∫mero de Tel√©fono:</label>
                <select id="codigoPaisCompra">
                    <option value="" disabled selected>Seleccione pa√≠s</option>
                    <option value="+57">+57 (Colombia)</option>
                    <option value="+1">+1 (EE.UU.)</option>
                </select>
                <input type="text" id="telefonoCompra" placeholder="Ingrese el n√∫mero">
            </div>
        </div>

        <div class="fila">
            <div class="campo">
                <label for="correoProveedor">Correo Electr√≥nico:</label>
                <input type="email" id="correoProveedor">
            </div>
            <div class="campo">
                <label for="fabricante">Fabricante:</label>
                <input type="text" id="fabricante">
            </div>
        </div>

        <div class="fila">
            <div class="campo">
                <label for="correoFabricante">Correo del Fabricante:</label>
                <input type="email" id="correoFabricante">
            </div>
            <div class="campo">
                <label for="vidaUtil">Vida √ötil:</label>
                <input type="text" id="vidaUtil">
            </div>
        </div>
        `;
    
    
     } else if (formaAdquisicion === "Donaci√≥n") {
        contenido = `
        <div class="fila">
            <div class="campo">
                <label for="nombreDonante">Nombre del Donante:</label>
                <input type="text" id="nombreDonante">
            </div>
            <div class="campo">
                <label for="telefonoDonante">N√∫mero de Tel√©fono:</label>
                <select id="codigoPaisDonacion">
                    <option value="" disabled selected>Seleccione pa√≠s</option>
                    <option value="+1">+1 (EE.UU., Canad√°)</option>
                    <option value="+34">+34 (Espa√±a)</option>
                    <option value="+57">+57 (Colombia)</option>
                    <option value="+44">+44 (Reino Unido)</option>
                </select>
                <input type="text" id="telefonoDonante" placeholder="Ingrese el n√∫mero">
            </div>
        </div>

        <div class="fila">
            <div class="campo">
                <label for="fechaDonacion">Fecha de la Donaci√≥n:</label>
                <input type="date" id="fechaDonacion">
            </div>
            <div class="campo">
                <label for="actaCertificado">Acta o Certificado:</label>
                <input type="file" id="actaCertificado">
            </div>
        </div>

        <div class="fila">
            <div class="campo">
                <label for="vidaUtilDonacion">Vida √ötil:</label>
                <input type="text" id="vidaUtilDonacion">
            </div>
        </div>
        `;
    } else if (formaAdquisicion === "Arrendamiento") {
        contenido = `
        <div class="fila">
            <div class="campo">
                <label for="nombreEmpresa">Nombre de la Empresa:</label>
                <input type="text" id="nombreEmpresa">
            </div>
            <div class="campo">
                <label for="telefonoEmpresa">N√∫mero de Tel√©fono:</label>
                <select id="codigoPaisArrendamiento">
                    <option value="" disabled selected>Seleccione pa√≠s</option>
                    <option value="+1">+1 (EE.UU., Canad√°)</option>
                    <option value="+34">+34 (Espa√±a)</option>
                    <option value="+57">+57 (Colombia)</option>
                    <option value="+44">+44 (Reino Unido)</option>
                </select>
                <input type="text" id="telefonoEmpresa" placeholder="Ingrese el n√∫mero">
            </div>
        </div>

        <div class="fila">
            <div class="campo">
                <label for="inicioContrato">Inicio del Contrato:</label>
                <input type="date" id="inicioContrato">
            </div>
            <div class="campo">
                <label for="finContrato">Fin del Contrato:</label>
                <input type="date" id="finContrato">
            </div>
        </div>

        <div class="fila">
            <div class="campo">
                <label for="costoArrendamiento">Costo del Arrendamiento:</label>
                <select id="monedaArrendamiento">
                    <option value="USD">$ USD</option>
                    <option value="COP">$ COP</option>
                    <option value="EUR">‚Ç¨ EUR</option>
                    <option value="MXN">$ MXN</option>
                </select>
                <input type="number" id="costoArrendamiento" placeholder="Ingrese el monto">
            </div>
            <div class="campo">
                <label for="responsableMantenimiento">Responsable del Mantenimiento:</label>
                <select id="responsableMantenimiento">
                    <option value="" disabled selected>Seleccione una opci√≥n</option>
                    <option value="Arrendatario">Arrendatario</option>
                    <option value="Hospital/Cl√≠nica">Hospital/Cl√≠nica</option>
                </select>
            </div>
        </div>

        <div class="fila">
            <div class="campo">
                <label for="vidaUtilArrendamiento">Vida √ötil:</label>
                <input type="text" id="vidaUtilArrendamiento">
            </div>
        </div>
        `;
    
    } else if (formaAdquisicion === "Comodato") {
    contenido = `
    <div class="fila">
        <div class="campo">
            <label for="nombrePrestador">Nombre del Prestador:</label>
            <input type="text" id="nombrePrestador">
        </div>
        <div class="campo">
            <label for="telefonoPrestador">N√∫mero de Tel√©fono:</label>
            <select id="codigoPaisComodato">
                <option value="" disabled selected>Seleccione pa√≠s</option>
                <option value="+1">+1 (EE.UU., Canad√°)</option>
                <option value="+34">+34 (Espa√±a)</option>
                <option value="+57">+57 (Colombia)</option>
                <option value="+44">+44 (Reino Unido)</option>
            </select>
            <input type="text" id="telefonoPrestador" placeholder="Ingrese el n√∫mero">
        </div>
    </div>

    <div class="fila">
        <div class="campo">
            <label for="inicioPrestamo">Inicio del Pr√©stamo:</label>
            <input type="date" id="inicioPrestamo">
        </div>
        <div class="campo">
            <label for="duracionPrestamo">Duraci√≥n del Pr√©stamo:</label>
            <input type="text" id="duracionPrestamo">
        </div>
    </div>

    <div class="fila">
        <div class="campo">
            <label for="documentoPrestamo">Documento del Pr√©stamo:</label>
            <input type="file" id="documentoPrestamo">
        </div>
        <div class="campo">
            <label for="responsableMantenimientoPrestamo">Responsable del Mantenimiento:</label>
            <select id="responsableMantenimientoPrestamo">
                <option value="" disabled selected>Seleccione una opci√≥n</option>
                <option value="Prestador">Prestador</option>
                <option value="Hospital/Cl√≠nica">Hospital/Cl√≠nica</option>
            </select>
        </div>
    </div>

    <div class="fila">
        <div class="campo">
            <label for="vidaUtilPrestamo">Vida √ötil:</label>
            <input type="text" id="vidaUtilPrestamo">
        </div>
    </div>
    `;
    }

    // Insertar contenido din√°mico
    camposDinamicos.innerHTML = contenido;
}

function validarCosto(tipo) {
    const moneda = document.getElementById(`moneda${tipo}`).value;
    const costo = document.getElementById(`costo${tipo}`).value.trim();
    const errorSpan = document.getElementById(`errorCosto${tipo}`);
    let esValido = true;

    // No mostrar error si el campo est√° vac√≠o
    if (!costo) {
        errorSpan.textContent = "";
        return;
    }

    // Convertir el valor a n√∫mero para validaciones de rango
    const costoNumerico = parseFloat(costo.replace(",", "."));

    // Validar seg√∫n la moneda seleccionada
    switch (moneda) {
        case "USD": // D√≥lares: enteros o decimales con m√°ximo dos decimales
            esValido = /^[0-9]+(\.[0-9]{1,2})?$/.test(costo) && costoNumerico >= 0.01 && costoNumerico <= 1000000;
            break;

        case "COP": // Pesos colombianos: enteros grandes
            esValido = /^[0-9]+$/.test(costo) && costoNumerico >= 1000 && costoNumerico <= 1000000000;
            break;

        case "EUR": // Euros: enteros o decimales separados por coma
            esValido = /^[0-9]+(,[0-9]{1,2})?$/.test(costo) && costoNumerico >= 0.01 && costoNumerico <= 1000000;
            break;

        case "MXN": // Pesos mexicanos: enteros grandes
            esValido = /^[0-9]+$/.test(costo) && costoNumerico >= 10 && costoNumerico <= 1000000000;
            break;

        default:
            esValido = false;
    }

    // Mostrar error si el valor no es v√°lido
    if (!esValido) {
        errorSpan.textContent = `El valor ingresado no es v√°lido para la moneda seleccionada (${moneda}).`;
    } else {
        errorSpan.textContent = ""; // Limpiar el mensaje si es v√°lido
    }
}

function validarTelefono(tipo) {
    const codigoPais = document.getElementById(`codigoPais${tipo}`).value;
    const telefono = document.getElementById(`telefono${tipo}`).value.trim();
    const errorSpan = document.getElementById(`errorTelefono${tipo}`);
    let esValido = false;

    // No mostrar error si el campo est√° vac√≠o
    if (!telefono) {
        errorSpan.textContent = "";
        return;
    }

    // Validar el n√∫mero de tel√©fono seg√∫n el prefijo del pa√≠s seleccionado
    switch (codigoPais) {
        case "+1": // EE.UU., Canad√°
            // Debe comenzar con un d√≠gito entre 2 y 9, seguido de 9 d√≠gitos adicionales
            esValido = /^[2-9][0-9]{9}$/.test(telefono);
            break;

        case "+34": // Espa√±a
            // Debe comenzar con 6 o 7, seguido de 8 d√≠gitos adicionales
            esValido = /^[6-7][0-9]{8}$/.test(telefono);
            break;

        case "+57": // Colombia
            // Debe comenzar con 3, seguido de un segundo d√≠gito entre 0-5 y 8 d√≠gitos adicionales
            esValido = /^3[0-5][0-9]{8}$/.test(telefono);
            break;

        case "+44": // Reino Unido
            // Debe comenzar con 7, seguido de 9 d√≠gitos adicionales
            esValido = /^7[0-9]{9}$/.test(telefono);
            break;

        default:
            esValido = false; // Pa√≠s no reconocido
    }

    // Mostrar mensaje de error si el n√∫mero no es v√°lido
    if (!esValido) {
        errorSpan.textContent = `El n√∫mero ingresado no es v√°lido para el pa√≠s seleccionado (${codigoPais}).`;
    } else {
        errorSpan.textContent = ""; // Limpiar el mensaje si es v√°lido
    }
}


//********************************************************************************
//BOTONES PARA GUARDAR / DESCARGAR E IMPRIMIR

document.addEventListener("DOMContentLoaded", () => {
    // Descargar el contenido como archivo HTML
    document.getElementById("downloadBtn").addEventListener("click", () => {
        const contenido = document.documentElement.outerHTML; // Obtener el HTML completo
        const blob = new Blob([contenido], { type: "text/html;charset=utf-8" });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "HojaDeVida.html";
        link.click();
    });

    // Imprimir la p√°gina actual
    document.getElementById("printBtn").addEventListener("click", () => {
        window.print();
    });

    // Guardar como PDF
    document.getElementById("savePdfBtn").addEventListener("click", () => {
        const element = document.querySelector("table"); // Cambia esto al elemento que deseas convertir
        const pdf = new jsPDF("p", "mm", "a4");

        // Usar html2canvas para renderizar el contenido como imagen
        html2canvas(element).then((canvas) => {
            const imgData = canvas.toDataURL("image/png");
            const imgWidth = 190; // Ajustar al tama√±o de la p√°gina
            const pageHeight = 297;
            const imgHeight = (canvas.height * imgWidth) / canvas.width;
            let position = 10; // Espacio inicial

            pdf.addImage(imgData, "PNG", 10, position, imgWidth, imgHeight);
            pdf.save("HojaDeVida.pdf");
        });
    });
});

//*************************************************************************************
//CLASIFICACION POR HOJA DE VIDA ELECTRONICO / ENDOSCOPIO

document.addEventListener("DOMContentLoaded", () => {
    // Obtener el tipo de equipo desde los par√°metros de la URL
    const params = new URLSearchParams(window.location.search);
    const equipos = JSON.parse(decodeURIComponent(params.get("equipos")));

    if (equipos && equipos.length > 0) {
        const equipo = equipos[0];
        const tipo = equipo.tipo; // Este campo debe contener "endoscopio" o "electr√≥nico"

        ajustarSeccionesPorTipo(tipo);
    } else {
        alert("No se encontraron datos del equipo.");
    }
});

// Funci√≥n para mostrar/ocultar secciones seg√∫n el tipo
function ajustarSeccionesPorTipo(tipo) {
    // Secciones espec√≠ficas para endoscopios
    const seccionesParaEndoscopio = [
        "identificacion",
        "registroHistorico",
        "registroApoyoTecnico",
        "caracteristicasTecnicas",
        "mantenimiento",
        "componentes",
        "listaChequeoDocumentos",
    ];

    // Secciones espec√≠ficas para electr√≥nicos
    const seccionesParaElectronico = [
        "identificacion",
        "registroHistorico",
        "registroApoyoTecnico",
        "registroHistoricoInstalacion",
        "registroTecnicoFuncionamiento",
        "mantenimiento",
        "componentes",
        "listaChequeoDocumentos",
    ];

    // Todas las secciones del documento
    const todasLasSecciones = [
        "identificacion",
        "registroHistorico",
        "registroApoyoTecnico",
        "caracteristicasTecnicas",
        "registroHistoricoInstalacion",
        "registroTecnicoFuncionamiento",
        "mantenimiento",
        "componentes",
        "listaChequeoDocumentos",
    ];

    // Mostrar/Ocultar secciones seg√∫n el tipo de equipo
    todasLasSecciones.forEach((id) => {
        const elemento = document.getElementById(id);
        if (tipo === "endoscopio" && seccionesParaEndoscopio.includes(id)) {
            elemento.style.display = "table-row-group"; // Mostrar
        } else if (tipo === "electronico" && seccionesParaElectronico.includes(id)) {
            elemento.style.display = "table-row-group"; // Mostrar
        } else {
            elemento.style.display = "none"; // Ocultar
        }
    });
}

//*********************************************************************************************
//GUARDAR HOJA DE VIDA

document.addEventListener("DOMContentLoaded", () => {
    const btnGuardarHojaVida = document.getElementById("guardarHojaVida");
    const numeroSerieInput = document.getElementById("hojaVidaNumeroSerie");

    // Funci√≥n para guardar la hoja de vida en localStorage
    btnGuardarHojaVida.addEventListener("click", () => {
        const numeroSerie = numeroSerieInput.value.trim();
        if (!numeroSerie) {
            alert("Por favor, ingrese el N√∫mero de Serie del equipo.");
            return;
        }

        // Obtener la informaci√≥n actual en localStorage
        let hojasVidaEquipos = JSON.parse(localStorage.getItem("hojasVidaEquipos")) || [];

        // Buscar si ya existe la hoja de vida de este equipo
        const index = hojasVidaEquipos.findIndex(doc => doc.numeroSerie === numeroSerie);
        if (index !== -1) {
            hojasVidaEquipos[index].cumplida = true;
        } else {
            hojasVidaEquipos.push({ numeroSerie, cumplida: true });
        }

        // Guardar en localStorage
        localStorage.setItem("hojasVidaEquipos", JSON.stringify(hojasVidaEquipos));

        alert("Hoja de Vida guardada exitosamente.");
    });
});







       </script>
    
    </body>
</html>